{"version":3,"file":"chip-list.js","sourceRoot":"","sources":["../../../../src/lib/chips/chip-list.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterContentInit,\n  ChangeDetectionStrategy,\n  Component,\n  ContentChildren,\n  ElementRef,\n  Input,\n  ModuleWithProviders,\n  NgModule,\n  QueryList,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport {MdChip} from './chip';\nimport {FocusKeyManager} from '../core/a11y/focus-key-manager';\nimport {coerceBooleanProperty} from '../core/coercion/boolean-property';\nimport {SPACE, LEFT_ARROW, RIGHT_ARROW} from '../core/keyboard/keycodes';\n\n/**\n * A material design chips component (named ChipList for it's similarity to the List component).\n *\n * Example:\n *\n *     <md-chip-list>\n *       <md-chip>Chip 1<md-chip>\n *       <md-chip>Chip 2<md-chip>\n *     </md-chip-list>\n */\n@Component({\n  moduleId: module.id,\n  selector: 'md-chip-list, mat-chip-list',\n  template: `<div class=\"md-chip-list-wrapper\"><ng-content></ng-content></div>`,\n  host: {\n    // Properties\n    'tabindex': '0',\n    'role': 'listbox',\n    '[class.mat-chip-list]': 'true',\n\n    // Events\n    '(focus)': 'focus()',\n    '(keydown)': '_keydown($event)'\n  },\n  queries: {\n    chips: new ContentChildren(MdChip)\n  },\n  styleUrls: ['chips.css'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MdChipList implements AfterContentInit {\n\n  /** Track which chips we're listening to for focus/destruction. */\n  private _subscribed: WeakMap<MdChip, boolean> = new WeakMap();\n\n  /** Whether or not the chip is selectable. */\n  protected _selectable: boolean = true;\n\n  /** The FocusKeyManager which handles focus. */\n  _keyManager: FocusKeyManager;\n\n  /** The chip components contained within this chip list. */\n  chips: QueryList<MdChip>;\n\n  constructor(private _elementRef: ElementRef) { }\n\n  ngAfterContentInit(): void {\n    this._keyManager = new FocusKeyManager(this.chips).withWrap();\n\n    // Go ahead and subscribe all of the initial chips\n    this._subscribeChips(this.chips);\n\n    // When the list changes, re-subscribe\n    this.chips.changes.subscribe((chips: QueryList<MdChip>) => {\n      this._subscribeChips(chips);\n    });\n  }\n\n  /**\n   * Whether or not this chip is selectable. When a chip is not selectable,\n   * it's selected state is always ignored.\n   */\n  @Input() get selectable(): boolean {\n    return this._selectable;\n  }\n\n  set selectable(value: boolean) {\n    this._selectable = coerceBooleanProperty(value);\n  }\n\n  /**\n   * Programmatically focus the chip list. This in turn focuses the first\n   * non-disabled chip in this chip list.\n   */\n  focus() {\n    // TODO: ARIA says this should focus the first `selected` chip.\n    this._keyManager.setFirstItemActive();\n  }\n\n  /** Passes relevant key presses to our key manager. */\n  _keydown(event: KeyboardEvent) {\n    let target = event.target as HTMLElement;\n\n    // If they are on a chip, check for space/left/right, otherwise pass to our key manager\n    if (target && target.classList.contains('mat-chip')) {\n      switch (event.keyCode) {\n        case SPACE:\n          // If we are selectable, toggle the focused chip\n          if (this.selectable) {\n            this._toggleSelectOnFocusedChip();\n          }\n\n          // Always prevent space from scrolling the page since the list has focus\n          event.preventDefault();\n          break;\n        case LEFT_ARROW:\n          this._keyManager.setPreviousItemActive();\n          event.preventDefault();\n          break;\n        case RIGHT_ARROW:\n          this._keyManager.setNextItemActive();\n          event.preventDefault();\n          break;\n        default:\n          this._keyManager.onKeydown(event);\n      }\n    }\n  }\n\n  /** Toggles the selected state of the currently focused chip. */\n  protected _toggleSelectOnFocusedChip(): void {\n    // Allow disabling of chip selection\n    if (!this.selectable) {\n      return;\n    }\n\n    let focusedIndex = this._keyManager.activeItemIndex;\n\n    if (this._isValidIndex(focusedIndex)) {\n      let focusedChip: MdChip = this.chips.toArray()[focusedIndex];\n\n      if (focusedChip) {\n        focusedChip.toggleSelected();\n      }\n    }\n  }\n\n  /**\n   * Iterate through the list of chips and add them to our list of\n   * subscribed chips.\n   *\n   * @param chips The list of chips to be subscribed.\n   */\n  protected _subscribeChips(chips: QueryList<MdChip>): void {\n    chips.forEach(chip => this._addChip(chip));\n  }\n\n  /**\n   * Add a specific chip to our subscribed list. If the chip has\n   * already been subscribed, this ensures it is only subscribed\n   * once.\n   *\n   * @param chip The chip to be subscribed (or checked for existing\n   * subscription).\n   */\n  protected _addChip(chip: MdChip) {\n    // If we've already been subscribed to a parent, do nothing\n    if (this._subscribed.has(chip)) {\n      return;\n    }\n\n    // Watch for focus events outside of the keyboard navigation\n    chip.onFocus.subscribe(() => {\n      let chipIndex: number = this.chips.toArray().indexOf(chip);\n\n      if (this._isValidIndex(chipIndex)) {\n        this._keyManager.updateActiveItemIndex(chipIndex);\n      }\n    });\n\n    // On destroy, remove the item from our list, and check focus\n    chip.destroy.subscribe(() => {\n      let chipIndex: number = this.chips.toArray().indexOf(chip);\n\n      if (this._isValidIndex(chipIndex)) {\n        // Check whether the chip is the last item\n        if (chipIndex < this.chips.length - 1) {\n          this._keyManager.setActiveItem(chipIndex);\n        } else if (chipIndex - 1 >= 0) {\n          this._keyManager.setActiveItem(chipIndex - 1);\n        }\n      }\n\n      this._subscribed.delete(chip);\n      chip.destroy.unsubscribe();\n    });\n\n    this._subscribed.set(chip, true);\n  }\n\n  /**\n   * Utility to ensure all indexes are valid.\n   *\n   * @param index The index to be checked.\n   * @returns True if the index is valid for our list of chips.\n   */\n  private _isValidIndex(index: number): boolean {\n    return index >= 0 && index < this.chips.length;\n  }\n\n}\n\n@NgModule({\n  imports: [],\n  exports: [MdChipList, MdChip],\n  declarations: [MdChipList, MdChip]\n})\nexport class MdChipsModule {\n  /** @deprecated */\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: MdChipsModule,\n      providers: []\n    };\n  }\n}\n"]}